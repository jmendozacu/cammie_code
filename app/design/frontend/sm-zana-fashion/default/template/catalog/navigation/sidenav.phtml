<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_default
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php 
/**
 * Top menu for store
 *
 * @see Mage_Catalog_Block_Navigation
 */
?>
<div class="block block-yt-layered-nav">
  <div class="block-layered-nav-inner">
    <div class="block-title">
        <strong><?php echo $this->__('Category') ?></strong>
    </div>
    <div class="block-content clearfix">
        <ul id="yt_sidenav">
        <?php foreach ($this->getStoreCategories() as $_category): ?>
            <?php echo $this->drawItem($_category) ?>
        <?php endforeach ?>
        </ul>
    </div>
  </div>
</div>
<script type="text/javascript">
    jQuery(document).ready(function($){
    $('#yt_sidenav li.parent').each(function(){
        $(this).find('> ul').wrap('<div class="res-wrapnav">');
        $(this).append('<span class="toggle" >&nbsp;</span>');
    });
    });
    jQuery(window).load(function(){
    jQuery('#yt_sidenav .parent .toggle').css('height', jQuery('#yt_sidenav .parent > a').outerHeight());

    jQuery('#yt_sidenav .parent > .res-wrapnav').each(function(){
        if(jQuery(this).parent().hasClass('open')){
            jQuery(this).css('height', jQuery(this).children('ul').height());
        }
    });
    jQuery('#yt_sidenav .parent .toggle').click(function(){
        if(jQuery(this).parent().hasClass('open')){
            jQuery(this).parent().removeClass('open');
            jQuery(this).parent().children('.res-wrapnav').css('height', '0px');
        }else{
            jQuery(this).parent().addClass('open');
         
          jQuery(this).parent().children('.res-wrapnav').css('height', jQuery(this).parent().children('.res-wrapnav').children('ul').height());
           jQuery(this).parent().parent().parent().css('height', 'auto');
        }
    });

    });
</script>